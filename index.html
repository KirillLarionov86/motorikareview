<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÐŸÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ...</title>
</head>
<body>
    <h2>ÐŸÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ...</h2>
    <p id="log">Ð–Ð´Ñ‘Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ...</p>

    <script>
        function logMessage(message) {
            console.log(message);
            document.getElementById('log').innerHTML += "<br>" + message;
        }

        logMessage("ðŸ”µ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚Ð°...");

        // **Ð’Ñ‹Ð²Ð¾Ð´Ð¸Ð¼ Ð¿Ð¾Ð»Ð½Ñ‹Ð¹ URL ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹**
        let fullUrl = window.location.href;
        logMessage("ðŸ”— Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ URL: " + fullUrl);

        // **Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ**
        function getQueryParam(param) {
            let result = new RegExp(param + "=([^&]*)", "i").exec(window.location.search);
            return result ? result[1] : null;
        }

        const shopId = getQueryParam("shop_id");
        const employeeId = getQueryParam("employee_id");

        logMessage("ðŸ” ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:");
        logMessage("âž¡ï¸ shop_id: " + (shopId ? shopId : "âŒ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ shop_id Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚!"));
        logMessage("âž¡ï¸ employee_id: " + (employeeId ? employeeId : "âš ï¸ employee_id Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½"));

        // **ÐŸÑ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ðµ ÑÑÑ‹Ð»ÐºÐ¸ Ð´Ð»Ñ Ð¾Ñ‚Ð·Ñ‹Ð²Ð¾Ð²**
        const reviewsUrl = {
            "1": "https://yandex.ru/maps/org/petrov_jewelry_watch/202367052946/reviews/",
            "2": "https://yandex.ru/maps/org/petrov_jewelry_watch/98434987667/reviews/",
            "3": "https://yandex.ru/maps/org/petrov_jewelry_watch/197362536275/reviews/"
        };

        let redirectUrl = reviewsUrl[shopId] || "https://yandex.ru/maps/";

        logMessage("ðŸ“Œ ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ shop_id...");
        if (redirectUrl) {
            logMessage("âœ… ÐÐ°Ð¹Ð´ÐµÐ½Ð° Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð°Ñ ÑÑÑ‹Ð»ÐºÐ°: " + redirectUrl);
        } else {
            logMessage("âŒ ÐžÑˆÐ¸Ð±ÐºÐ°! ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¹ shop_id: " + shopId);
        }

        // **Ð¤Ð¸ÐºÑÐ°Ñ†Ð¸Ñ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð² Ð¯Ð½Ð´ÐµÐºÑ.ÐœÐµÑ‚Ñ€Ð¸ÐºÐµ**
        if (employeeId) {
            logMessage("ðŸ“Š Ð¤Ð¸ÐºÑÐ¸Ñ€ÑƒÐµÐ¼ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð² Ð¯Ð½Ð´ÐµÐºÑ.ÐœÐµÑ‚Ñ€Ð¸ÐºÐµ...");
            ym(80551024, 'reachGoal', 'review_redirect', { employee_id: employeeId, shop_id: shopId });
        }

        // **ÐŸÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ**
        logMessage("ðŸš€ Ð“Ð¾Ñ‚Ð¾Ð²Ð¸Ð¼ÑÑ Ðº Ñ€ÐµÐ´Ð¸Ñ€ÐµÐºÑ‚Ñƒ...");
        logMessage("ðŸŒ ÐžÑ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÐ¼: " + redirectUrl);
        
        setTimeout(() => {
            window.location.replace(redirectUrl);
        }, 1000);
    </script>
</body>
</html>
