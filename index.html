<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</title>
</head>
<body>
    <h2>–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...</h2>
    <p id="log">–ñ–¥—ë–º –¥–∞–Ω–Ω—ã–µ...</p>

    <script>
        function logMessage(message) {
            console.log(message);
            document.getElementById('log').innerHTML += "<br>" + message;
        }

        logMessage("üîµ –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞...");
        
        // **–í—ã–≤–æ–¥–∏–º –ø–æ–ª–Ω—ã–π URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
        let fullUrl = window.location.href;
        logMessage("üîó –¢–µ–∫—É—â–∏–π URL: " + fullUrl);

        // **–ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL**
        const urlParams = new URLSearchParams(window.location.search);
        logMessage("üìú –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: " + urlParams.toString());

        const shopId = urlParams.get('shop_id');
        const employeeId = urlParams.get('employee_id');

        logMessage("üîç –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:");
        logMessage("‚û°Ô∏è shop_id: " + (shopId ? shopId : "‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä shop_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç!"));
        logMessage("‚û°Ô∏è employee_id: " + (employeeId ? employeeId : "‚ö†Ô∏è employee_id –Ω–µ —É–∫–∞–∑–∞–Ω"));

        // **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤**
        const reviewsUrl = {
            "1": "https://yandex.ru/maps/org/petrov_jewelry_watch/202367052946/reviews/",
            "2": "https://yandex.ru/maps/org/petrov_jewelry_watch/98434987667/reviews/",
            "3": "https://yandex.ru/maps/org/petrov_jewelry_watch/197362536275/reviews/"
        };

        let redirectUrl = reviewsUrl[shopId];

        logMessage("üìå –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ shop_id...");
        if (redirectUrl) {
            logMessage("‚úÖ –ù–∞–π–¥–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: " + redirectUrl);
        } else {
            logMessage("‚ùå –û—à–∏–±–∫–∞! –ù–µ–≤–µ—Ä–Ω—ã–π shop_id: " + shopId);
        }

        // **–§–∏–∫—Å–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ**
        if (employeeId) {
            logMessage("üìä –§–∏–∫—Å–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ...");
            ym(80551024, 'reachGoal', 'review_redirect', { employee_id: employeeId, shop_id: shopId });
        }

        // **–í—ã–≤–æ–¥–∏–º –∏—Ç–æ–≥–æ–≤—É—é —Å—Å—ã–ª–∫—É**
        if (redirectUrl) {
            logMessage("üöÄ –ì–æ—Ç–æ–≤–∏–º—Å—è –∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç—É...");
            logMessage("üåç –û—Ç–∫—Ä—ã–≤–∞–µ–º: " + redirectUrl);
            
            setTimeout(() => {
                window.location.replace(redirectUrl);
            }, 1000);
        } else {
            logMessage("‚ùå –û—à–∏–±–∫–∞! –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ç–∑—ã–≤–æ–≤.");
            document.body.innerHTML = "<h2 style='color: red;'>–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π shop_id!</h2>";
        }
    </script>
</body>
</html>
